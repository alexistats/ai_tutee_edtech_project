# codex.yaml â€” Codex configuration and safety guardrails

model: gpt-5-codex
reasoning_level: medium
temperature: 0.2

# ---------- PATH PERMISSIONS ----------
paths:
  read: ["./"]
  write:
    - "app/"
    - "tests/"
    - "docs/"
    - "scripts/"
  deny_write:
    - ".git/"
    - "logs/"
    - "data/"
    - "venv/"
    - ".env"

# ---------- EXECUTION GUARDRAILS ----------
exec:
  allow:
    - "python"
    - "pytest"
    - "ruff"
    - "black"
    - "uv"
    - "streamlit"
  deny:
    - "rm"
    - "curl"
    - "wget"
    - "ssh"
    - "sudo"

# ---------- WORKFLOW ----------
workflow:
  require_diff_review: true
  prefer_branch: "codex/${task}"
  test_command: "pytest -q"
  lint:
    - "ruff ."
    - "black --check ."

# ---------- ENVIRONMENT ----------
python_version: "3.11"
dependencies:
  - openai
  - pyyaml
  - rich
  - python-dotenv
  - pytest
  - ruff
  - black
  - streamlit

# ---------- NOTES ----------
notes: |
  - Codex should always propose a diff before writing.
  - Use profiles from AGENTS.md (Architect, Implementer, etc.).
  - All structured artifacts (YAML/JSON) must validate against schema.
  - Commits and branches should reference Milestone and Task IDs.
  - Human review required before merging any generated code.
